<div class="row">
  <div class="left card">
    <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;">
      <div>
        <label class="muted">Upload an image or drag & drop (PNG/JPG)</label>
        <div class="buttons" style="margin-top:8px;">
          <label class="fake-btn small" for="fileInput">Choose image</label>
          <button id="btnLoadURL" class="small">Load from URL</button>
          <button id="btnClear" class="small">Clear</button>
        </div>
      </div>
      <div style="text-align:right;">
        <div class="muted">Best for portraits / people</div>
        <div style="margin-top:6px;">
          <span id="fileInfo" class="muted">No image</span>
        </div>
      </div>
    </div>

    <div id="canvasWrap" style="margin-top:12px;">
      <canvas id="workCanvas" width="800" height="600" style="background:transparent;"></canvas>
    </div>

    <div class="controls">
      <div class="option-row">
        <button id="btnAutoRemove" class="small">Automatic (Person model)</button>
        <button id="btnChroma" class="small">Chroma Key (manual)</button>
        <button id="btnDownload" class="small">Download PNG</button>
        <button id="btnPreviewChecker" class="small">Toggle Checkerboard</button>
      </div>

      <div style="display:flex;gap:10px;">
        <div style="flex:1;">
          <label class="muted">Segmentation threshold: <span id="segVal">0.7</span></label>
          <input type="range" id="segRange" min="0.1" max="0.95" step="0.05" value="0.7">
        </div>
        <div style="width:120px;">
          <label class="muted">Edge blur (px): <span id="blurVal">8</span></label>
          <input type="range" id="blurRange" min="0" max="40" step="2" value="8">
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center;">
        <input type="color" id="colorPicker" value="#00ff00" title="Chroma key color">
        <div style="flex:1;">
          <label class="muted">Chroma tolerance: <span id="tolVal">60</span></label>
          <input type="range" id="tolRange" min="0" max="255" value="60">
        </div>
      </div>

      <div class="status" id="status">Model not loaded yet. Click "Automatic" to load model (runs in your browser).</div>
    </div>
  </div>

  <div class="right">
    <div class="card">
      <div class="muted">How it works</div>
      <p style="margin:6px 0 0 0;font-size:14px;color:#dbeff6;">
        This page processes images entirely inside your browser. For portraits it uses a person-segmentation model (TensorFlow.js body-pix). For other images you can try the chroma-key tool (pick a color + tolerance). No server uploads.
      </p>
      <div class="footnote">Note: external JS libraries are loaded from CDNs. If you prefer offline, download the libraries and serve locally.</div>
    </div>

    <div class="card">
      <div class="muted">Tips</div>
      <ul style="margin:6px 0 0 16px;color:#d7eefc">
        <li>Start with a person photo on a simple background — automatic works best.</li>
        <li>Increase edge blur for softer transitions when removing background.</li>
        <li>Use the chroma key for product photos shot against a solid color.</li>
      </ul>
      <div style="margin-top:8px;" class="example-hint">Try: portrait, group photos with distinct people, or product on solid background.</div>
    </div>

    <div class="card" style="display:flex;gap:8px;flex-direction:column;">
      <div class="muted">Quick actions</div>
      <div class="buttons" style="margin-top:6px;">
        <button id="btnFit" class="small">Fit Canvas to Image</button>
        <button id="btnOrig" class="small">Show Original</button>
      </div>
      <div id="modelStats" class="muted" style="margin-top:6px;">Model: not loaded</div>
    </div>
  </div>
</div>

<footer>
  <div class="muted">Processed locally — libraries loaded from CDNs</div>
  <div class="muted">Built with HTML/CSS/JS</div>
</footer>
